

/*** huewheel.min.js, copyright (2016) Juergen Skrotzky (JorgenVikingGod@gmail.com) ***/
function HueWheel(a,b){function ca(a,b){var c=a.getBoundingClientRect();return S=Fa(b.touches[0]),{x:b.touches[0].clientX-c.left,y:b.touches[0].clientY-c.top}}function da(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}function fa(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}function ga(a,b){var c=a-t,d=b-u;return{dist:Math.sqrt(c*c+d*d),angle:Math.atan2(d,c)}}function ha(){r=a.getBoundingClientRect().width,s=r}function ja(a){var b=da(e,a);U=b.x,V=b.y;var c=ga(U,V),d=c.dist,f=c.angle;return d<M?(e.style.cursor="pointer",S?(fa(a),ua()):ba=!0):e.style.cursor="default",pa(!1),(R=g.isPointInPath(U,V))?(ra(),oa(!0),!1):(d>L-.5*B&&d<L+.5*B&&(v=f*p+90,v<0&&(v+=360),ra(),oa(!1),ta()),!1)}function ka(a){var b=da(e,a);U=b.x,V=b.y;var h,c=ga(U,V),d=c.dist,f=c.angle;if(d<M&&(e.style.cursor="pointer"),R)v=f*p+90,v<0&&(v+=360),y&&(d<0&&(d=0),d>L-Q&&(d=L-Q),z=d/(L-Q)),va(),ra(),oa(!0),ta();else{if(pa(!1),h=g.isPointInPath(U,V))return e.style.cursor="pointer",!1;if(d>L-.5*B&&d<L+.5*B)return e.style.cursor="crosshair",!1;if(d<M)return e.style.cursor="pointer",!1;e.style.cursor="default"}return!1}function la(a){var b=da(e,a);U=b.x,V=b.y;var c=ga(U,V),d=c.dist;fa(a),!S&&ba&&d<M?(e.style.cursor="pointer",ua()):e.style.cursor="default",R=!1,ba=!1,qa()}function ma(){L=.5*(r-B-2*D)+1,M=(L-.5*B)*F,O=[t-.5*B,u],Q=Math.max(r*C,5)}function na(){var c,d,f,h,i;for(ma(),r=a.getBoundingClientRect().width,g.clearRect(0,0,r,s),e.width=e.height=r,e.innerHTML="<h1>No HTML5 Canvas support. Please upgrade the browser.</h1>",g.lineWidth=B,D>0&&(g.save(),g.save(),g.shadowColor=b.shadowColor||"rgba(0, 0, 0, 1)",g.shadowBlur=D,g.beginPath(),g.arc(t,u,L,0,q),g.closePath(),g.stroke(),g.restore(),g.globalCompositeOperation="destination-out",g.beginPath(),g.arc(t,u,L,0,q),g.closePath(),g.stroke(),g.restore()),c=0,f=0,h=4/j;c<360;c+=j)d=(c-90+1)*o,i=c*h,g.strokeStyle="rgb("+m[i]+","+m[i+1]+","+m[i+2]+")",g.beginPath(),g.arc(t,u,L,f,d+.01),g.stroke(),f=d;e.style.backgroundImage="url("+e.toDataURL()+")",g.clearRect(0,0,r,s)}function oa(a){pa(!0),E&&(g.shadowColor=b.shadowColor||"rgba(0, 0, 0, 1)",g.shadowBlur=D),g.lineWidth=r/70,g.strokeStyle="#000",g.fillStyle="rgb("+W+","+X+","+Y+")",g.fill(),E&&(g.shadowColor="rgba(0, 0, 0, 0)",g.shadowBlur=0),g.stroke()}function pa(a){g.setTransform(1,0,0,1,0,0),g.translate(t,u),g.rotate((v-90)*o),g.translate(-t,-u);var b=t+Q+(L-Q)*(y?z:1);y&&a&&(g.lineWidth=1,g.beginPath(),g.moveTo(t,u-.5),g.lineTo(t+L-.5*B,u-.5),g.strokeStyle="#000",g.stroke(),g.beginPath(),g.moveTo(t,u+.5),g.lineTo(t+L-.5*B,u+.5),g.strokeStyle="#fff",g.stroke()),g.beginPath(),g.arc(b,u,.4*B,0,q),g.closePath()}function qa(){ra(),oa(!1)}function ra(){sa(),g.clearRect(0,0,r,s),w&&(g.beginPath(),g.arc(t,u,M,0,q),g.closePath(),g.fillStyle="rgb("+W+","+X+","+Y+")",g.fill(),g.lineWidth=G,g.strokeStyle=H,g.stroke())}function sa(){var a=x?ya(v,z,A):xa(v,z,A);W=a.r,X=a.g,Y=a.b,va()}function ta(){clearTimeout(T),null!==c.onchange&&(T=setTimeout(c.onchange({h:v%360,s:z,l:A,v:A,r:W,g:X,b:Y,x:U,y:V,isIE:d,isTouch:S}),12))}function ua(){clearTimeout(T),null!==c.onclick&&(T=setTimeout(c.onclick({h:v%360,s:z,l:A,v:A,r:W,g:X,b:Y,x:U,y:V,isIE:d,isTouch:S}),12))}function va(){v%=360,z=Math.max(0,Math.min(z,1)),A=Math.max(0,Math.min(A,1));var a=wa(W,X,Y);W=a.r,X=a.g,Y=a.b}function wa(a,b,c){return a=Math.max(0,Math.min(a,255)),b=Math.max(0,Math.min(b,255)),c=Math.max(0,Math.min(c,255)),{r:a,g:b,b:c}}function xa(a,b,c){a/=60;var j,d=0|a,e=a-d,f=1-b,g=c*f,h=c*(f*e),i=c*(f*(1-e));switch(d){case 0:j=[c,i,g];break;case 1:j=[h,c,g];break;case 2:j=[g,c,i];break;case 3:j=[g,h,c];break;case 4:j=[i,g,c];break;case 5:case 6:j=[c,g,h]}return{r:255*j[0]+.5|0,g:255*j[1]+.5|0,b:255*j[2]+.5|0}}function ya(a,b,c){function i(a,b,c){return c%=1,c<.166667?a+(b-a)*c*6:c<.5?b:c<.666667?a+(b-a)*(.666667-c)*6:a}var d,e,f,g,h;return a/=360,0===b?d=e=f=c:(g=c<.5?c*(1+b):c+b-c*b,h=2*c-g,d=i(h,g,a+.333333),e=i(h,g,a),f=i(h,g,a-.333333)),d=255*d+.5|0,e=255*e+.5|0,f=255*f+.5|0,d=Math.max(0,Math.min(d,255)),e=Math.max(0,Math.min(e,255)),f=Math.max(0,Math.min(f,255)),{r:d,g:e,b:f}}function za(a,b,c){a/=255,b/=255,c/=255;var d=Math.max(a,b,c),e=Math.min(a,b,c),f=d-e,g=0,h=0,i=.5*(d+e);return d!==e&&(h=i<.5?f/(d+e):f/(2-d-e),g=a===d?(b-c)/f:b===d?2+(c-a)/f:4+(a-b)/f),g*=60,g<0&&(g+=360),{h:g,s:h,l:i}}function Aa(a,b,c){a/=255,b/=255,c/=255;var d,e,f,g,h=Math.min(a,Math.min(b,c)),i=Math.max(a,Math.max(b,c));return h===i?(f=h,{h:0,s:0,v:f}):(g=a===h?b-c:c===h?a-b:c-a,d=a===h?3:c===h?1:5,d=60*(d-g/(i-h)),e=(i-h)/i,f=i,{h:d,s:e,v:f})}function Ba(a,b,c){v=a,z=b,A=c,va(),qa()}function Ca(a){return"string"==typeof a}function Da(a){return"boolean"==typeof a}function Ea(a){return"number"==typeof a}function Fa(a){return"undefined"!=typeof a}b=b||{},Ca(a)&&(a=document.getElementById(a));var l,m,L,M,O,P,Q,T,U,V,W,X,Y,Z,$,_,c=this,d=navigator.msPointerEnabled,e=document.createElement("canvas"),f=document.createElement("canvas"),g=e.getContext("2d"),h=f.getContext("2d"),i=360,j=360/i,k=h.createLinearGradient(0,0,i,0),o=(.5*Math.PI,Math.PI/180),p=180/Math.PI,q=2*Math.PI,r=a.getBoundingClientRect().width,s=r,t=.5*r,u=t,v=0,w=!0,x=!0,y=!1,z=1,A=.5,B=Math.max(.15*r,3),C=.1,D=r/40,E=!0,F=.9,G=r/15,H="#000",I="#fff",J="#777",K=!0,R=!1,S=!1;for(Z=Object.keys(b),P=0;$=Z[P];P++)switch(_=b[$],$){case"diameter":Ea(_)&&(r=s=b.diameter),t=.5*r,u=t;break;case"hue":Ea(_)&&(v=_%360);break;case"colorSpace":!Ca(_)||"hsl"!==_&&"hsv"!==_||(x="hsl"===_);break;case"saturation":Ea(_)&&(z=_);break;case"lightness":case"brightness":Ea(_)&&(A=_);break;case"thicknessHue":Ea(_)&&(B=_);break;case"hueKnobSize":Ea(_)&&(C=_);break;case"shadowBlur":Ea(_)&&(D=_);break;case"hueKnobShadow":Da(_)&&(E=_);break;case"showColorSpot":Da(_)&&(w=_);break;case"tabable":Da(_)&&(K=_);break;case"colorSpotWidth":Ea(_)&&(F=_);break;case"colorSpotBorder":Ea(_)&&(G=_);break;case"colorSpotBorderColor":Ca(_)&&(H=_);break;case"hueKnobColor":Ca(_)&&(I=_);break;case"lightnessKnobColor":Ca(_)&&(lightKnobColor=_);break;case"hueKnobColorSelected":Ca(_)&&(J=_);break;case"lightnessKnobColorSelected":Ca(_)&&(lightKnobColorSel=_);break;case"lightnessRingClickable":Da(_)&&(lightClickable=_);break;case"rgb":if(Array.isArray(_)&&3===_.length){var aa=x?za(_[0],_[1],_[2]):Aa(_[0],_[1],_[2]);v=aa.h,z=aa.s,A=aa.l}}this.onchange=Fa(b.onChange)?b.onChange:null,this.onclick=Fa(b.onClick)?b.onClick:null,e.id=(a.id||"hueWheel")+"_canvas",K&&(e.tabIndex=0),f.width=i,f.height=2,k.addColorStop(0,"#f00"),k.addColorStop(.17,"#ff0"),k.addColorStop(.33,"#0f0"),k.addColorStop(.5,"#0ff"),k.addColorStop(.67,"#00f"),k.addColorStop(.83,"#f0f"),k.addColorStop(1,"#f00"),h.fillStyle=k,h.fillRect(0,0,i,1),k=h.createLinearGradient(0,0,i,0),k.addColorStop(0,"#000"),k.addColorStop(1,"#fff"),h.fillStyle=k,h.fillRect(0,1,i,1),l=h.getImageData(0,0,i,2),m=l.data,na(),a.innerHTML="",a.appendChild(e),qa(),ta();var ba=!1;d?(e.addEventListener("MSPointerDown",ja,!1),window.addEventListener("MSPointerMove",ka,!1),window.addEventListener("MSPointerUp",la,!1)):(e.addEventListener("mousedown",ja,!1),e.addEventListener("mousemove",ka,!1),e.addEventListener("mouseup",la,!1)),window.addEventListener("resize",ha,!1),document.body.addEventListener("touchstart",function(a){a.target===e&&a.preventDefault()},!1),document.body.addEventListener("touchend",function(a){a.target===e&&a.preventDefault()},!1),document.body.addEventListener("touchmove",function(a){a.target===e&&a.preventDefault()},!1),e.addEventListener("touchstart",function(a){mousePos=ca(e,a);var b=a.touches[0],c=new MouseEvent("mousedown",{clientX:b.clientX,clientY:b.clientY});e.dispatchEvent(c)},!1),e.addEventListener("touchend",function(a){var b=new MouseEvent("mouseup",{});e.dispatchEvent(b)},!1),e.addEventListener("touchmove",function(a){var b=a.touches[0],c=new MouseEvent("mousemove",{clientX:b.clientX,clientY:b.clientY});e.dispatchEvent(c)},!1),this.hsl=function(a,b,c){if(!arguments.length){if(x)return{h:v,s:z,l:A};var d=xa(v,z,A),e=za(d.r,d.g,d.b);return{h:e.h,s:e.s,l:e.l}}return Ba(a,b,c),this},this.hsv=function(a,b,c){var d,e,f;return arguments.length?(d=xa(a,b,c),f=za(d.r,d.g,d.b),Ba(f.h,f.s,f.l),this):x?(d=ya(v,z,A),e=Aa(d.r,d.g,d.b),{h:e.h,s:e.s,v:e.v}):{h:v,s:z,v:A}},this.rgb=function(a,b,c){if(!arguments.length)return{h:v,s:z,l:A,v:A};var d=wa(a,b,c);a=d.r,b=d.g,c=d.b;var e=x?za(a,b,c):Aa(a,b,c);return v=e.h,z=e.s,A=e.l||e.v,va(),qa(),ta(),this},this.showColor=function(a){return arguments.length&&Da(a)?(w=a,qa(),this):w},this.thicknessHue=function(a){return arguments.length&&Ea(a)?(a<3&&(a=3),a>.3*r&&(a=.3*r|0),B=a,na(),qa(),this):B},this.colorSpotRadius=function(a){return arguments.length&&Ea(a)?(F=a,na(),qa(),this):F},this.colorSpace=function(a){if(!arguments.length||"hsl"!==a&&"hsv"!==a)return x?"hsl":"hsv";var b,c;return x&&"hsv"===a?(b=ya(v,z,A),c=Aa(b.r,b.g,b.b),v=c.h,z=c.s,A=c.v):x||"hsl"!==a||(b=xa(v,z,A),c=za(b.r,b.g,b.b),v=c.h,z=c.s,A=c.l),x="hsl"===a,qa(),ta(),this},this.rgb2hsl=za,this.rgb2hsv=Aa,this.hsv2rgb=xa,this.hsl2rgb=ya}
